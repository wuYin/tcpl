## 第 7 章：输入与输出

介绍 C 中对标准设备的格式化输入输出，对文件的访问和读写，函数中对变长多类型参数的处理，及其他常用库函数。

### 7.1 标准输入和输出

最简单的单个字符输入输出函数是 `getchar()` 与 `putchar()`，其中文件常量及对应的文件描述符为：

```c
EOF    // -1
stdin  // 0 
stdout // 1
stderr // 2
```

### 7.2 格式化输出 函数  printf

`%p` 输出指针类型  `void *` 的地址。

### 7.3 变长参数列表

注意四个函数的使用：

```c
va_list ap;        // 声明参数指针，后续依次引用各参数
va_start(ap, fmt); // 将 ap 初始化为最后一个有名参数，将从 ap 的下一个参数开始处理
va_arg(ap, int);   // 将指针指向的参数按给定的类型解释，决定返回对象的类型、接下来要移动的步长
va_end(ap);        // 清理
```

### 7.4 格式化输入函数 scanf

`scanf` 会忽略格式串中的空格和制表符，从标准输入中读取时将跳过。配套能指定输入来源的 `sscanf` 函数。

### 7.5 文件访问

`fopen` 打开文件：对模式 w，写不存在则创建，写存在则覆盖。

对应的，有单个字符读写的 `getc` 和 `putc` 函数，有格式化输入输出的 `fscanf` 和 `fprintf`。

需手动 `fclose` 关闭文件，断开文件指针与变量名的连接。

### 7.6 错误处理：stderr 和 exit

`ferror` 会检查 fp 流是否出现错误。

### 7.7 行输入和行输出

`fgets` 与 `fputs`

### 7.8 其他函数

注意 malloc 和 calloc 分配的内存需 free 手动释放。